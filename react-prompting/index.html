<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="/static/styles/global.css" />
  <link rel="stylesheet" href="/static/styles/code.css" />

  <link rel="icon" href="/static/icon/icon.svg" type="image/svg+xml">
  <link rel="shortcut icon" href="/static/icon/favicon.ico" />

  <link rel="alternate" type="application/rss+xml" href="https://notes.zachmanson.com/posts.xml" title="notes: posts" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="UTF-8" />
  <title>notes: react prompting</title>
</head>

<body>
  <nav>
    <div class="main-icon">
      <a href="/">
        <svg xmlns="http://www.w3.org/2000/svg" baseProfile="full" version="1.1" style="fill: none;"
          viewBox="26.88 56.87 216.25 156.27">
          <path
            style="stroke-width: 15px; stroke-linecap: butt; stroke-linejoin: round; stroke: rgb(10, 10, 10); fill: none;"
            d="M135,75 A60,60 0 0,0 75,135 A60,60 0 0,0 135,195 A60,60 0 0,0 195,135 A60,60 0 0,0 135,75 M45,90 A15,15 0 0,1 60,75 A15,15 0 0,1 75,90 L75,135 L75,180 A15,15 0 0,1 60,195 A15,15 0 0,1 45,180 M225,90 A15,15 0 0,0 210,75 A15,15 0 0,0 195,90 L195,135 L195,180 A15,15 0 0,0 210,195 L210,195 A15,15 0 0,0 225,180 M135,105 A30,30 0 0,1 165,135 A30,30 0 0,1 135,165 A30,30 0 0,1 105,135 A30,30 0 0,1 135,105 M45,105 L45,105 L45,165 M225,105 L225,105 L225,165 ">
          </path>
        </svg>
      </a>
    </div>

    <div class="nav-segments-container">
      <div class="nav-segments">
        
        <div class="nav-links piblings">
          
          
          
          <a href="/generative-models">Generative Models</a>
          
          
          
          <a href="/limitations-of-machine-learning">Limitations of Machine Learning</a>
          
          
          
          <a href="/machine-learning-concepts" class="activated-link">Machine Learning Concepts</a>
          
          
          
          <a href="/neural-networks">Neural Networks</a>
          
          
          
          <a href="/pytorch">PyTorch</a>
          
          
        </div>
        

        
        <div class="nav-links siblings">
          
          
          
          <a href="/few-shot-learning">Few-Shot Learning</a>
          

          
          
          <a href="/flash-attention">Flash Attention</a>
          

          
          
          <a href="/low-rank-adaptation">Low-Rank Adaptation</a>
          

          
          
          <a href="/quantization">Quantization</a>
          

          
          
          <a href="/react-prompting" class="activated-link">ReAct Prompting</a>
          

          
        </div>
        

        
      </div>
    </div>
  </nav>

  <main>
    <header>
      <h1>ReAct Prompting</h1>
    </header>

    <article><p>ReAct prompting is a technique that allows LLMs to outsource tasks to specialised tools to expand their capabilities. This works by prompting the LLM to respond in a thought/act/observation loop, where it follows this chain of events (taken from <a href="https://interconnected.org/home/2023/03/16/singularity">here</a>):</p>
<blockquote>
<p>Thought: Let’s think step by step. I need to find out X and then do Y.</p>
<p>Act: Search Wikipedia for X</p>
<p><em>LLM waits for response</em>.</p>
<p>Observation: From the Wikipedia page I have learnt that …</p>
<p>Thought: So the answer is …</p>
</blockquote>
<p>The act clause is the LLM selecting from a limited number of options that is has been informed of ahead of time, such as searching Wikipedia, entering a calculation into a calculator, searching a <a href="/databases">database</a> etc.. A ReAct harness program will detect the act clause, take the action, and feed the result back into LLM.  The LLM then uses this data to inform its answer.  This is similar to how Bing Chat's Sydney AI works.</p>
<p>Here is an example flow by Simon Willison:</p>
<blockquote>
<blockquote>
<p><strong>Question:</strong> Population of Paris, squared? </p>
<p><strong>Thought:</strong> I should look up the population of paris and then multiply it</p>
<p><strong>Action:</strong> search_wikipedia: Paris</p>
</blockquote>
<p>Then it stops. Your code harness for the model reads that last line, sees the action and goes and executes an API call against Wikipedia. It continues the dialog with the model like this:</p>
<blockquote>
<p><strong>Observation:</strong> <truncated content from the Wikipedia page, including the 2,248,780 population figure></p>
</blockquote>
<p>The model continues:</p>
<blockquote>
<p><strong>Thought:</strong> Paris population is 2,248,780 I should square that</p>
<p><strong>Action:</strong> calculator: 2248780 ** 2</p>
</blockquote>
<p>Control is handed back to the harness, which passes that to a calculator and returns:</p>
<blockquote>
<p><strong>Observation:</strong> 5057011488400</p>
</blockquote>
<p>The model then provides the answer:</p>
<blockquote>
<p><strong>Answer:</strong> The population of Paris squared is 5,057,011,488,400</p>
</blockquote>
</blockquote>
<p>This allows the capabilities of the LLM to be expanded extremely easily.  This is Willison's  example prompt to set up this user flow for a <a href="https://til.simonwillison.net/llms/python-react-pattern">toy implementation</a>:</p>
<div class="highlight"><pre><span></span><code>You run in a loop of Thought, Action, PAUSE, Observation.
At the end of the loop you output an Answer
Use Thought to describe your thoughts about the question you have been asked.
Use Action to run one of the actions available to you - then return PAUSE.
Observation will be the result of running those actions.
Your available actions are:
calculate:
e.g. calculate: 4 * 7 / 3
Runs a calculation and returns the number - uses Python so be sure to use floating point syntax if necessary
wikipedia:
e.g. wikipedia: Django
Returns a summary from searching Wikipedia
simon_blog_search:
e.g. simon_blog_search: Django
Search Simon&#39;s blog for that term
Always look things up on Wikipedia if you have the opportunity to do so.
Example session:
Question: What is the capital of France?
Thought: I should look up France on Wikipedia
Action: wikipedia: France
PAUSE
You will be called again with this:
Observation: France is a country. The capital is Paris.
You then output:
Answer: The capital of France is Paris
</code></pre></div>
<p>LangChain's codebase provides <a href="https://github.com/hwchase17/langchain/blob/2f6833d4334f762d2abb070a5e1496fc560c5435/langchain/agents/react/wiki_prompt.py#L5">more examples with greater detail</a>.</p>
<p>Bing Sydney does some form of this, where it can execute Bing search queries to help it answer questions.  <a href="/chatgpt">ChatGPT</a> has implemented a modular ReAct prompting setup with <a href="https://openai.com/blog/chatgpt-plugins">ChatGPT Plugins</a>.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://react-lm.github.io/">ReAct website</a></li>
<li><a href="https://github.com/hwchase17/langchain">LangChain</a>, a python library for connecting LLMs to other tools</li>
<li><a href="https://interconnected.org/home/2023/03/16/singularity">The surprising ease and effectiveness of AI in a loop</a><ul>
<li>interesting dicussion of ReAct using <a href="https://langchain.readthedocs.io/en/latest/">LangChain</a></li>
</ul>
</li>
<li><a href="https://simonwillison.net/2023/Mar/17/beat-chatgpt-in-a-browser/">Could you train a ChatGPT-beating model for $85,000 and run it in a browser?</a><ul>
<li>discusses alpaca.cpp, ReAct prompting and the ability to easily expand the capabilities of LLMs, even basic ones</li>
<li>includes a basic ReAct prompting script with ChatGPT APIs</li>
</ul>
</li>
<li><a href="https://www.geoffreylitt.com/2023/01/29/fun-with-compositional-llms-querying-basketball-stats-with-gpt-3-statmuse-langchain.html">Fuzzy API composition: querying NBA stats with GPT-3 + Statmuse + Langchain</a><ul>
<li>ReAct prompting in use</li>
</ul>
</li>
<li><a href="https://dagster.io/blog/chatgpt-langchain">Build a GitHub Support Bot with GPT3, LangChain, and Python</a></li>
<li><a href="https://openai.com/blog/chatgpt-plugins">ChatGPT Plugins announcement</a><ul>
<li>a modular ReAct setup</li>
</ul>
</li>
</ul></article>
  </main>

  <footer>
    <details>
      <summary>
        <div class="footer-row">
          
          meta
          
          <a href="/recent-changes">recent</a>
          <a href="/larry-page-builds-a-web-robot" class="not-extra-small">random</a>
          <a href="/posts">posts</a>
          <a href="/sitemap" class="not-extra-small">sitemap</a>
          <a href="https://github.dev/zachpmanson/notes/blob/main/./notes/Notes/Software/Machine Learning/Machine Learning Concepts/ReAct Prompting.md" class="desktop">edit</a>
          <a href="https://github.com/zachpmanson/notes/edit/main/./notes/Notes/Software/Machine Learning/Machine Learning Concepts/ReAct Prompting.md" class="mobile">edit</a>
          <a href="mailto:zachpmanson@gmail.com?subject=On 'ReAct Prompting'">reply</a>
        </div>
      </summary>
      <div class="extra-small">
        <div class="footer-row">
          <a href="/sitemap">sitemap</a>
          <a href="/larry-page-builds-a-web-robot">random</a>
        </div>
      </div>

      

      <p class="backlinks"><strong>Incoming:</strong>
        
        <a href="/llama">LLaMA</a>
        
        </span>
      </p>
      

      
      <p>
        

        <span class="backlinks">
          <strong>
            Updated:
          </strong>
          <date>2024-10-07</date>
        </span>

      </p>
    </details>

  </footer>
  
  <script type="module">
    let allActivatedLinks = document.querySelectorAll(".activated-link");

    function checkVisible(el) {
      let rect = el.getBoundingClientRect();
      let viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
      return !(rect.bottom < 0 || rect.top - viewHeight >= 0);
    }


    function scrollActivatedLinksIntoView(behavior="smooth") {
      for (let link of allActivatedLinks) {
        if (checkVisible(link.parentElement)) {
          link.scrollIntoView({behavior: behavior, block: "center", inline: "nearest"});
        }
      }
    }
    
    document.querySelector("nav").addEventListener("mouseleave", ()=>{
      setTimeout(scrollActivatedLinksIntoView, 350);
    });
    scrollActivatedLinksIntoView();
  </script>
</body>

</html>